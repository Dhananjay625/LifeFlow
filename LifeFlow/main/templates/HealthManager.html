{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Health Manager - LifeFlow</title>
  <link rel="stylesheet" href="{% static 'index.css' %}?v=4">
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
  <div class="container">
    <aside>
      <!--  Sidebar Nav. -->
      <nav class="nav">
        <ul class="nav-links">
          <li>
            <a href="{% url 'UserProfile' %}" {% if request.resolver_match.url_name == 'TaskManager' %}{% endif %}>
              <i class='bx bx bx-user'></i><span><strong>{{ user.username }}</strong></span>
            </a>
          </li>
          <li>
            <a href="{% url 'TaskManager' %}" {% if request.resolver_match.url_name == 'TaskManager' %}class="active"{% endif %}>
              <i class='bx bx-grid-alt'></i><span>Task Manager</span>
            </a>
          </li>
          <li>
            <a href="{% url 'calender' %}" {% if request.resolver_match.url_name == 'calender' %}class="active"{% endif %}>
              <i class='bx bx-calendar'></i><span>Calendar</span>
            </a>
          </li>
          <li>
            <a href="{% url 'confirm_password' %}" {% if request.resolver_match.url_name == 'DocumentStorage' %}class="active"{% endif %}>
              <i class='bx bx-folder'></i><span>Document Manager</span>
            </a>
          </li>
          <li>
            <a href="{% url 'Subscription' %}" {% if request.resolver_match.url_name == 'Subscription' %}class="active"{% endif %}>
              <i class='bx bx-cloud-download'></i><span>Subscription Tracker</span>
            </a>
          </li>
          <li>
            <a href="{% url 'BillManager' %}" {% if request.resolver_match.url_name == 'BillManager' %}class="active"{% endif %}>
              <i class='bx bx-receipt'></i><span>Bill Manager</span>
            </a>
          </li>
          <li>
            <a href="{% url 'HealthManager' %}" {% if request.resolver_match.url_name == 'HealthManager' %}class="active"{% endif %}>
              <i class='bx bx-dumbbell'></i><span>Health Manager</span>
            </a>
          </li>
        </ul>
        
        <div class="collapse-btn">
          <a href="#" data-resize-btn>
            <i class='bx bx-chevrons-right'></i><span>Collapse</span>
          </a>
        </div>
        <div class="logout-btn">
          <a href="{% url 'login' %}">
            <i class='bx bx-log-out'></i><span>Logout</span>
          </a>
        </div>
      </nav>
    </aside>

    <main class="content">
      <header class="header">
        <div class="date">{{ now|date:"l, F jS, Y" }}</div>
        <h1>Health Manager</h1>
      </header>

      <!-- User Information -->
      <section class = "user-info">
        <h2>User Information</h2>
        <div class="info-row">
          <div class="info-item">
            <span class="label">Age:</span>
            <span class="value">50 years</span>
          </div>
          <div class="info-item">
            <span class="label">Weight:</span>
            <span class="value">70kg</span>
          </div>
        </div>
        <div class="info-row">
          <div class="info-item">
            <span class="label">Body Fat:</span>
            <span class="value">25.6%</span>
          </div>
          <div class="info-item">
            <span class="label">Medication:</span>
            <span class="value"></span>
          </div>
        </div>
      </section>

      <!-- Daily Measures & Reminders -->
      <section class="two-column">
      <!-- Daily Measures -->
      <div class="card">
        <div class="card-header">
          <h2>Health Log</h2>
          <button class="plus-btn" onclick="openModal('measuresModal')"><i class='bx bx-plus'></i></button>
        </div>
        <ul class="card-list">
          <li>Water Intake: {{ metrics.water_intake }}</li>
          <li>Steps: {{ metrics.steps }}</li>
          <li>Calories: {{ metrics.calories }}</li>
        </ul>
      </div>

      <div class="card">
        <div class="card-header">
          <h2>Reminders</h2>
          <button class="plus-btn" onclick="openModal('reminderModal')"><i class='bx bx-plus'></i></button>
        </div>
        
        <ul class="card-list">
          {% for reminder in reminders %}
             <li>{{ reminder.text }} - {{ reminder.date }}</li>
          {% empty %}
            <li>No reminders yet.</li>
          {% endfor %}
        </ul>
      
      </div>
    </section>
    </main>
  </div>
<div class="modal" id="measuresModal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('measuresModal')">&times;</span>
    <h2>Update Daily Measures</h2>
    <form method="POST" action="">
      {% csrf_token %}

      <label for="water">Water Intake (ml):</label>
      <input type="number" name="water_intake" id="water" value="{{ metrics.water_intake|default:'' }}" required><br>
      
      <label for="steps">Steps:</label>
      <input type="number" name="steps" id="steps" value="{{ metrics.steps|default:'' }}" required><br>
      
      <label for="calories">Calories:</label>
      <input type="number" name="calories" id="calories" value="{{ metrics.calories|default:'' }}" required><br>
      
      <button type="submit" name="save_metrics">Save</button>
    </form>
  </div>
</div>

<div class="modal" id="reminderModal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('reminderModal')">&times;</span>
    <h2>Add Reminder</h2>
    <form method="POST" action="">
      {% csrf_token %}

      <label for="reminder_text">New Reminder:</label>
      <input type="text" name="reminder_text" required>
      
      <label for="reminder_date">Date:</label>
      <input type="date" name="reminder_date">
      
      <button type="submit" name="save_reminder">Save</button>
    </form>
    <ul>
      {% for reminder in reminders %}
        <li>{{ reminder.text }} ({{ reminder.date }})</li>
      {% empty % }
        <li>No reminders yet.</li>
      {% endfor %}
    </ul>
  </div>
</div>

<script>
function openModal(id) {
  document.getElementById(id).style.display = 'block';
}
function closeModal(id) {
  document.getElementById(id).style.display = 'none';
}
const resizeBtn = document.querySelector("[data-resize-btn]");
    resizeBtn.addEventListener("click", function (e) {
      e.preventDefault();
      document.body.classList.toggle("sb-expanded");
    });


</script>

</body>
</html>
