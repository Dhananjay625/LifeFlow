{% load static %}

<li class="nav-item dropdown">
  <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="userMenu"
     role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <img src="{% static 'appboard/images/default-avatar.jpg' %}" alt="" class="rounded-circle" width="28" height="28">
    <span class="ms-2">
      {{ request.user.get_short_name|default:request.user.username|default:"User" }}
    </span>
  </a>

  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenu">
    {% if request.user.is_authenticated %}
      <li><a class="dropdown-item" href="{% url 'user_profile' %}">Profile</a></li>
      <li><a class="dropdown-item" href="{% url 'change_password' %}">Change password</a></li>
      <li><hr class="dropdown-divider"></li>
      <li>
        <form method="post" action="{% url 'logout' %}">
          {% csrf_token %}
          <button class="dropdown-item" type="submit">Log out</button>
        </form>
      </li>
    {% else %}
      <li><a class="dropdown-item" href="{% url 'login' %}">Log in</a></li>
      <li><a class="dropdown-item" href="{% url 'register' %}">Register</a></li>
    {% endif %}
  </ul>
</li>